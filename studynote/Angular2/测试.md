# 测试  
本章提供了一些测试`Angular`应用的提示和技巧。虽然这里讲述了一些常规测试理念和技巧，但是其重点是测试用`Angular`编写的应用。  

## Angular测试入门  
本章教你如何编写测试程序来探索和确认应用的行为。测试的作用有：  
* 测试守护由于代码变化而打破已有代码(“回归”)的情况。  
* 不管代码被正确使用还是错误使用，测试程序起到澄清代码的作用。  
* 测试程序暴露设计和实现可能出现的错误。测试程序从很多角度为代码亮出警报灯。当应用程序很难被测试时， 其根本原因一般都是设计缺陷，这种缺陷最好立刻被修正，不要等到它变得很难被修复的时候才行动。  

### 工具与技术  
我们可以用多种工具和技术来编写和运行`Angular`测试程序。本次介绍了一些是大家已经知道能良好工作的选择。  

| 技术 | 目的 |
| ---- | --- |
| `Karma` | `karma`测试运行器是在开发应用的过程中 编写和运行单元测试的理想工具。 它能成为项目开发和连续一体化进程的不可分割的一部分。本章讲述了如何用`Karma`设置和运行测试程序。 |
| `Jasmine` | `Jasmine`测试框架提供了所有编写基本测试的工具。 它自带HTML测试运行器，用来在浏览器中执行测试程序。 |  

### 环境设置  
要开始单元测试，有两天捷径：  
* 遵循环境设置中给出的步骤开始一个新项目。  
* 使用Angular CLI创建新的项目。  

以上两种方法都安装在各自的模式下为应用预先配置的npm包、文件和脚本。它们的文件和规程有一点不同，但是它们的核心部分是一样的，并且在测试代码方面没有任何区别。  

### 独立单元测试 vs. `Angular`测试工具集   
**独立单元测试**用于测试那些完全不依赖`Angular`或不需要注入值的类实例。 测试程序是所有`new`创建该类的实例，为构造函数参数提供所需的测试替身，然后测试该实例的`API`接口。  

> 我们应该为**管道**和**服务**书写独立单元测试。  

我们也同样可以对**组件**写独立单元测试。 不过，独立单元测试无法体现组件与`Angular`的交互。 具体来说，就是不能发现组件类如何与它的模板或其它组件交互。  

这时我们需要`Angular`测试工具集。 `Angular`测试工具集包括`TestBed`类和一些来自`@angular/core/testing`的助手函数。  
本章将会重点讲解它们，通过[第一个组件测试]()来讲解, 本章稍后的部分将展示`Angular`测试工具集的全貌。  

## 第一个Karma测试  
编写简单的测试程序，来确认以上的配置是否工作正常。  

在应用的根目录`app/`创建新文件，名叫`1st.spec.ts`。  
> 用`Jasmine`编写的测试程序都被叫做`specs`。文件名后缀必须是`.spec.ts`，这是`karma.conf.js`和其它工具所坚持和遵守的规约。  
将测试程序`spec`放到`app/`文件夹下的任何位置。 `karma.conf.js`告诉`Karma`在这个文件夹中寻找测试程序`spec`文件，原因在 这里 有所解释。  

添加下面的代码到`app/1st.spec.ts`。  
> src/app/1st.spec.ts  
```ts
describe('1st tests', () => {
  it('true is true', () => expect(true).toBe(true));
});
```  
### 运行Karma  
